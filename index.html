<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>چارت کندل‌استیک فارکس - ۸ نماد و ۴ تایم فریم</title>
<style>
  body {
    background-color: #121212;
    color: white;
    font-family: Tahoma, sans-serif;
    margin: 0; padding: 10px;
  }
  h2 {
    margin: 15px 0 5px 0;
    font-weight: normal;
  }
  .symbol-block {
    border: 1px solid #333;
    margin-bottom: 30px;
    padding: 10px;
    border-radius: 6px;
  }
  .timeframes {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
  }
  .chart-container {
    background: #1e1e1e;
    border-radius: 6px;
    padding: 5px;
    width: 300px;
    height: 200px;
  }
</style>
<script src="https://unpkg.com/lightweight-charts@3.9.0/dist/lightweight-charts.standalone.production.js"></script>
</head>
<body>

<h1>۸ نماد اصلی فارکس با ۴ تایم فریم (کندل‌استیک)</h1>

<div id="charts-root"></div>

<script>
  const symbols = ['EURUSD', 'GBPUSD', 'USDJPY', 'USDCHF', 'USDCAD', 'AUDUSD', 'NZDUSD', 'EURGBP'];
  const timeframes = [
    {label: '۱۵ دقیقه', minutes: 15},
    {label: '۳۰ دقیقه', minutes: 30},
    {label: '۱ ساعت', minutes: 60},
    {label: '۴ ساعت', minutes: 240}
  ];

  const root = document.getElementById('charts-root');

  // تابع تولید داده فرضی کندل (باز، بسته، بالا، پایین)
  function generateFakeCandles(numCandles, startTime, intervalMinutes) {
    const candles = [];
    let time = startTime;
    let price = 1.1000 + Math.random() * 0.01; // قیمت شروع فرضی
    for (let i = 0; i < numCandles; i++) {
      const open = price;
      const close = open + (Math.random() - 0.5) * 0.002;
      const high = Math.max(open, close) + Math.random() * 0.001;
      const low = Math.min(open, close) - Math.random() * 0.001;
      candles.push({
        time: time,
        open: parseFloat(open.toFixed(5)),
        close: parseFloat(close.toFixed(5)),
        high: parseFloat(high.toFixed(5)),
        low: parseFloat(low.toFixed(5))
      });
      time += intervalMinutes * 60; // افزایش timestamp به ثانیه
      price = close;
    }
    return candles;
  }

  // تابع ساخت هر نماد و تایم فریم
  function createSymbolBlock(symbol) {
    const container = document.createElement('div');
    container.className = 'symbol-block';

    const title = document.createElement('h2');
    title.textContent = `نماد: ${symbol}`;
    container.appendChild(title);

    const tfContainer = document.createElement('div');
    tfContainer.className = 'timeframes';

    timeframes.forEach(tf => {
      const chartDiv = document.createElement('div');
      chartDiv.className = 'chart-container';
      tfContainer.appendChild(chartDiv);

      // ایجاد چارت کندل‌استیک
      const chart = LightweightCharts.createChart(chartDiv, {
        width: 300,
        height: 200,
        layout: {
          backgroundColor: '#121212',
          textColor: 'rgba(255, 255, 255, 0.8)',
        },
        grid: {
          vertLines: { color: '#333' },
          horzLines: { color: '#333' },
        },
        rightPriceScale: {
          borderColor: '#555',
        },
        timeScale: {
          borderColor: '#555',
          timeVisible: true,
          secondsVisible: false,
        },
      });

      const candleSeries = chart.addCandlestickSeries({
        upColor: '#4CAF50',
        downColor: '#F44336',
        borderVisible: false,
        wickUpColor: '#4CAF50',
        wickDownColor: '#F44336',
      });

      // تولید داده فرضی
      const now = Math.floor(Date.now() / 1000);
      const candles = generateFakeCandles(50, now - 50 * tf.minutes * 60, tf.minutes);
      candleSeries.setData(candles);

      // اضافه کردن عنوان تایم‌فریم به بالای چارت
      const label = document.createElement('div');
      label.style.color = '#ccc';
      label.style.fontSize = '12px';
      label.style.textAlign = 'center';
      label.style.marginTop = '5px';
      label.textContent = tf.label;
      chartDiv.appendChild(label);
    });

    container.appendChild(tfContainer);
    return container;
  }

  // اضافه کردن همه نمادها به صفحه
  symbols.forEach(sym => {
    const block = createSymbolBlock(sym);
    root.appendChild(block);
  });
</script>

</body>
</html>
